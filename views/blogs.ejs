<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <%- include("./includes/head.ejs") %>
    <title>Blogs</title>
  </head>

  <body>
    <%- include("./includes/navbar.ejs") %> <%-
    include("./includes/sidebar.ejs") %>
    <div id="wrapper">
      <div id="page-wrapper">
        <div id="page-inner">
          <div class="row">
            <div class="col-md-12">
              <h2>Blogs</h2>
              <h2 style="color: red">
                <% if (err) { %> <%- err.error %> <%- err.message %> <% } %>
              </h2>
            </div>
          </div>
          <!-- /. ROW  -->

          <hr />
          <div class="row">
            <div class="col-lg-12 col-md-12">
              <a href="/admin/blog/new/" class="btn btn-info btn-lg"
                >Add blog</a
              >
            </div>
            <br />
            <br />
            <div class="col-lg-12 col-md-12">
              <table class="table table-striped table-bordered table-hover">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Title</th>
                    <th>Type</th>
                    <th>Publish Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <% if (data) { %> 
                    <% for (const [i,item] of data.entries()) { %>

                  <tr>
                    <td><%- i+1 %></td>
                    <td> <a href="<%- "/admin/blog/edit/" + item.id %>"> <%- item.title %> </a></td>
                    <td> <strong> <%- item.type %> </strong> </td>
                    <td><%- item.publish_date %>  </td>
                    <td> <strong>  <%- item.status %> </strong>  </td>
                    <td class="forms-container">
                      <form action="<%- "/admin/blog/publish/" + item.id %>" 
                        method="post" class="button-form">
                        <button type="submit" class="btn btn-info">
                          Publish
                        </button>
                      </form>
                      <form action="<%- "/admin/blog/un-publish/" + item.id %>" 
                        method="post" class="button-form">
                        <button type="submit" class="btn btn-warning">
                          Un Publish
                        </button>
                      </form>
                      <form action="<%- "/admin/blog/delete/" + item.id+"?_method=DELETE" %>" 
                        method="post" class="button-form">
                        <button type="submit" class="btn btn-danger">
                          Delete
                        </button>
                      </form>
                    </td>
                  </tr>
                  <% } %> 
                <% } %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!-- /. PAGE WRAPPER  -->
    </div>

    <%- include("./includes/footer.ejs") %>
  </body>
</html>
